CROSS=arm-himix200-linux-
CXX=$(CROSS)g++
CC=$(CROSS)gcc
AR=$(CROSS)ar

CFLAGS += -Wall -g -O2

SRCXX += beacon_log.cpp
SRCXX += beacon_log4cpp.cpp

PROG_SHARED := libbeacon_log.so
PROG_STATIC := libbeacon_log.a

PROGXX_OBJ= $(SRCXX:.cpp=.o)
PROG_OBJ= $(SRC:.c=.o)

#BK_INCLUDE += -I../thirdlibrary/boost_1_60_0/include/
BK_INCLUDE += -I../../thirdlibrary/log4cpp/mybuild_himix200/include/
BK_INCLUDE += -I./
LIBS += ../../thirdlibrary/log4cpp/mybuild_himix200/lib/liblog4cpp.a


.PHONY : clean all

all: $(PROG_SHARED) $(PROG_STATIC)

$(PROG_STATIC): $(PROGXX_OBJ) $(PROG_OBJ)
	$(AR) crv $@ $^
	$(CROSS)ranlib $@

$(PROG_SHARED): $(PROGXX_OBJ) $(PROG_OBJ)
	$(CXX) -shared -o $@ $^ $(CFLAGS) $(BK_INCLUDE)  $(LIBS) -lpthread
	$(CROSS)strip $@
	

%.o:%.cpp  
	$(CXX) $(CFLAGS) $(BK_INCLUDE) -Wno-reorder -fPIC -c -o $@ $^ 

%.o:%.c
	$(CC) $(CFLAGS) $(BK_INCLUDE) -Wno-reorder -fPIC -c -o $@ $^ 

clean:
	@-rm -f $(PROG_SHARED)
	@-rm -f $(PROG_STATIC)
	@-rm -f $(PROGXX_OBJ)
	@-rm -f $(PROG_OBJ)
	@-rm -f $(COMM_OBJ)

install:
	cp $(PROG_SHARED) /home/mjj/work/nfs/
